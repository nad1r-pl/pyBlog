{% extends 'blog/_base.html' %}
{% load markdown_extras %}

{% block body %}
<article class="blog_article">

  <h2 class="blog_title">{{ blog.title }}</h2>
  <div class="blog_date_wrapper">Posted : <span
      class="blog_date_posted">{{ blog.created_at|date:"SHORT_DATETIME_FORMAT" }}</span>
    {% if blog.created_at|date:"SHORT_DATETIME_FORMAT" != blog.updated_at|date:"SHORT_DATETIME_FORMAT" %}
    <span class="blog-date-updated">(Updated at
      {{ blog.updated_at|date:"SHORT_DATETIME_FORMAT" }})</span>
    {% endif %}
  </div>
  <div class="blog_body">
    {{ blog.body | markdown | safe }}
  </div>
</article>
<section class="blog_comments">
  {% with blog.no_of_comments as total_comments %}
  <div class="blog_comment_count">There {{total_comments|pluralize:"is,are"}}
    <b>{{total_comments}}</b> comment{{total_comments|pluralize}} on this
    post
  </div>
  {% endwith %}
  {% for comment in blog.comments.all %}
  <div class="blog_comment_wrapper">
    <div class="blog_comment_header">
      <div class="blog_comment_author">
        {% if comment.created_by_user %}
        <a href="{% url 'profile' %}">{{comment.get_commenter}}</a>
        {% else %}
        {{comment.get_commenter}}
        {% endif %}
      </div>
      <div class="blog_comment_date">Commented {{comment.created_at}}</div>
    </div>
    <div class="blog_comment_body">
      {{comment.body|linebreaks}}</div>
  </div>
  {% endfor %}
</section>
<div class="detail-back"><a href="{% url 'blog:index' %}">Back to Index</a>
</div>
{% endblock body %}
